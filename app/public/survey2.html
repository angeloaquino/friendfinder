<!DOCTYPE html>
<html lang="en">

<head>


	<!-- Link to the jQuery Library -->
	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>

	<!-- Including Font Awesome Icons -->
	<script src="https://use.fontawesome.com/b38c8ed4c7.js"></script>

<!--Import Google Icon Font-->
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<!-- Compiled and minified Materialize CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.min.css">

<!-- Compiled and minified Materialize JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/js/materialize.min.js"></script>
				
		
		<title>Friend Finder</title>
</head>

<body>
	<!-- Header -->
	<header>
			<nav>
				<div class="nav-wrapper black accent-2">
					<ul class="right hide-on-med-and-down" id="head-nav-links">
						<li><a href="/survey">Survey</a></li>
						<li><a href="/api/friends">API</a></li>
						<li><a href="https://github.com/angeloaquino/friendfinder">GitHub Repo</a></li>
					</ul>
				</div>
			</nav>
		</header>

<!-- Main Content -->
	<main>
		<div class="container">
			<div class="row">
				<div class="col s12 z-depth-5 mainpanel">
					<div id="mainpanel-content">
						<h1>Survey Questions</h1>

						<!-- Survey Questions -->
						<div class="input-field col s12">
							<h3>Question 1</h3>
							<h5>You have a craving for adventure and new experiences.</h5>
							<select id="question1">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field col s12">
							<h3>Question 2</h3>
							<h5>You value comfort in the form of solitude rather than surrounded by others.</h5>
							<select id="question2">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field col s12">
							<h3>Question 3</h3>
							<h5>You tend to be an overthinker, even with the simplist of tasks.</h5>
							<select id="question3">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field col s12">
							<h3>Question 4</h3>
							<h5>You're a great storyteller.</h5>
							<select id="question4">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field col s12">
							<h3>Question 5</h3>
							<h5>People consider you to be a reliable person.</h5>
							<select id="question5">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field col s12">
							<h3>Question 6</h3>
							<h5>It is difficult to annoy you.</h5>
							<select id="question6">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field col s12">
							<h3>Question 7</h3>
							<h5>In a game of truth or dare, you almost always choose dare.</h5>
							<select id="question7">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field col s12">
							<h3>Question 8</h3>
							<h5>You consider your friends to be an extension or addition to your family.</h5>
							<select id="question8">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field col s12">
							<h3>Question 9</h3>
							<h5>You believe listening is more powerful than having your voice be heard.</h5>
							<select id="question9">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<div class="input-field col s12">
							<h3>Question 10</h3>
							<h5>You love chocolate.</h5>
							<select id="question10">
								<option value="" disabled selected>Choose your option</option>
								<option value="1">1 (Strongly Disagree)</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5 (Strongly Agree)</option>
							</select>
						</div>

						<!-- Survey Submit Button -->
						<div>
							<button class="btn waves-effect waves-light" type="submit" name="action" id="submitButton">Submit
								<i class="material-icons right">send</i>
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</main>

<!-- Results Card -->
	<div id="modal1" class="modal">
		<div class="modal-content">
			<h4>Your Starter</h4>
			<div class="divider"></div>
			<h5 id="userMatch"></h5>
			<img id="userMatchImage" class="materialboxed" width="650" src="">
		</div>
		<div class="modal-footer">
			<a href="/survey" class="modal-action modal-close waves-effect waves-orange btn-flat">Play Again!</a>
		</div>
	</div>

<script type="text/javascript">

	// Chosen CSS
	var config = {
		".chosen-select": {},
		".chosen-select-deselect": { allow_single_deselect: true },
		".chosen-select-no-single": { disable_search_threshold: 10 },
		".chosen-select-no-results": { no_results_text: "Oops, nothing found!" },
		".chosen-select-width": { width: "95%" }
	};

	for (var selector in config) {
		$(selector).chosen(config[selector]);
	}

	// Capture the form inputs
	$("#submit").on("click", function () {

		// Form validation
		function validateForm() {
			var isValid = true;
			$(".form-control").each(function () {
				if ($(this).val() === "") {
					isValid = false;
				}
			});

			$(".chosen-select").each(function () {

				if ($(this).val() === "") {
					isValid = false;
				}
			});
			return isValid;
		}

		// If all required fields are filled
		if (validateForm()) {
			// Create an object for the user"s data
			var userData = {
				name: $("#name").val(),
				photo: $("#photo").val(),
				scores: [
					$("#q1").val(),
					$("#q2").val(),
					$("#q3").val(),
					$("#q4").val(),
					$("#q5").val(),
					$("#q6").val(),
					$("#q7").val(),
					$("#q8").val(),
					$("#q9").val(),
					$("#q10").val()
				]
			};

			// Grab the URL of the website
			var currentURL = window.location.origin;

			// AJAX post the data to the friends API.
			$.post(currentURL + "/api/friends", userData, function (data) {

				// Grab the result from the AJAX post so that the best match's name and photo are displayed.
				$("#matchName").text(data.name);
				$("#matchImg").attr("src", data.photo);

				// Show the modal with the best match
				$("#resultsModal").modal("toggle");

			});
		}
		else {
			alert("Please fill out all fields before submitting!");
		}

		return false;
	});


</script>

</html>